<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:a="http://xmlns.jcp.org/jsf/passthrough"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:f="http://java.sun.com/jsf/core">
    <h:head>
        <title>ph7bank - Gerenciamento de Clientes</title>
        <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0-beta/css/materialize.min.css"></link>
        <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet"></link>
        <link rel="stylesheet" type="text/css" href="recursos/estilo/clienteStyle.css"></link>
        <link rel="shortcut icon" href="recursos/imagens/imglogo.png"></link>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0-beta/js/materialize.min.js"></script>
        <script type="text/javascript" src="recursos/scripts/jquery-3.3.1.min.js"/>
    </h:head>
    <h:body>
        <div class="demo-layout">
            <div class="row">
                <div class="sidebar col s3">
                    <div class="demo-drawer mdl-layout__drawer mdl-color--blue-grey-900 mdl-color-text--blue-grey-50">
                        <header class="demo-drawer-header">
                            <img src="recursos/imagens/usericon.png" class="demo-avatar"></img>
                            <br/>
                            <div class="demo-avatar-dropdown">
                                <br></br>
                                <span>Olá, #{user}<i class="material-icons right">more_vert</i></span>         
                            </div>
                        </header>
                        <div class="collection demo-navigation mdl-navigation mdl-color--blue-grey-800">
                            <a class="collection-item mdl-navigation__link" href="index.xhtml"><i class="mdl-color-text--blue-grey-400 material-icons" role="presentation">home</i>Início</a>
                            <a class="collection-item mdl-navigation__link" href="#emprestimo"><i class="mdl-color-text--blue-grey-400 material-icons" role="presentation">account_balance</i>Empréstimos</a>
                            <h:form id="myFrm">
                                <h:commandButton id="btnsearch" action="#{luser.logout()}" style="display: none"></h:commandButton>
                                <button type="submit" id="myFrm:btnsearch" name="myFrm:btnsearch" class="collection-item mdl-navigation__link">
                                    <i class="mdl-color-text--blue-grey-400 material-icons" role="presentation">lock_open</i>
                                    Logout
                                </button>
                            </h:form>
                        </div>
                    </div>
                </div>
                <div class="main-content col s9 offset-s3">
                    <div class="demo-layout mdl-layout mdl-js-layout mdl-layout--fixed-drawer mdl-layout--fixed-header">
                        <nav>
                            <div class="nav-wrapper">
                                <a href="#" class="brand-logo">Área do Gerente</a>
                                <ul id="nav-mobile" class="right hide-on-med-and-down">
                                    <li><a href="#"><i class="material-icons">search</i></a></li>
                                    <li><a href="#"><i class="material-icons right">more_vert</i></a></li>
                                </ul>
                            </div>
                        </nav>  
                        <main class="row">
                            <div class="col s12">
                                <div class="card demo-charts mdl-color--white mdl-shadow--2dp mdl-cell mdl-cell--12-col mdl-grid">
                                    <div class="card-content">
                                        <div class="row">
                                            <div class="col s12">
                                                <h4>Listagem de Clientes</h4>
                                            </div>
                                            <div class="col s12">
                                                <h:form>
                                                    <h:dataTable value="#{clienteListagemBean.clientes}" var="cliente"
                                                                 styleClass="order-table"
                                                                 headerClass="order-table-header"
                                                                 rowClasses="order-table-odd-row,order-table-even-row"
                                                                 class="highlight"
                                                                 >
                                                        <h:column>
                                                            <f:facet name="header">
                                                                Nome
                                                            </f:facet>
                                                            #{cliente.nome}
                                                        </h:column>

                                                        <h:column>
                                                            <f:facet name="header">
                                                                Agência
                                                            </f:facet>
                                                            #{cliente.conta.agencia}
                                                        </h:column>

                                                        <h:column>
                                                            <f:facet name="header">
                                                                Conta
                                                            </f:facet>
                                                            #{cliente.conta.numeroconta}
                                                        </h:column>
                                                        <h:column>
                                                            <f:facet name="header">
                                                                Saldo
                                                            </f:facet>
                                                            R$ #{cliente.conta.saldo}
                                                        </h:column>
                                                        <h:column>
                                                            <f:facet name="header">
                                                                CPF
                                                            </f:facet>
                                                            #{cliente.cpf}
                                                        </h:column>

                                                        <h:column>
                                                            <f:facet name="header">
                                                                Encerrar Conta
                                                            </f:facet>
                                                            <h:commandButton class="btn waves-effect red darken-3" value="X" action="#{clienteCadastroBean.remover(cliente)}" />
                                                        </h:column>
                                                    </h:dataTable>
                                                </h:form>
                                            </div>
                                        </div>                    
                                    </div>
                                </div>
                            </div>
                            <div class="col s12">
                                <div class="card demo-charts mdl-color--white mdl-shadow--2dp mdl-cell mdl-cell--12-col mdl-grid">
                                    <div class="card-content">
                                        <div class="row">
                                            <div class="col s12">
                                                <h4>Listagem de Empréstimos</h4>
                                            </div>
                                            <div class="col s12">
                                                <h:form>
                                                    <h:dataTable value="#{clienteListagemBean.emprestimos}" var="emprestimo"
                                                                 styleClass="order-table"
                                                                 headerClass="order-table-header"
                                                                 rowClasses="order-table-odd-row,order-table-even-row"
                                                                 class="highlight"
                                                                 >
                                                        <h:column>
                                                            <f:facet name="header">
                                                                ID
                                                            </f:facet>
                                                            #{emprestimo.id}
                                                        </h:column>

                                                        <h:column>
                                                            <f:facet name="header">
                                                                Valor
                                                            </f:facet>
                                                            R$ #{emprestimo.valor}
                                                        </h:column>
                                                        <h:column>
                                                            <f:facet name="header">
                                                                Aceitar Empréstimo
                                                            </f:facet>
                                                            <h:commandButton class="btn waves-effect green darken-3" value="V" action="#{gerenteEmprestimoBean.aceitarEmprestimo(emprestimo)}" />
                                                        </h:column>
                                                        <h:column>
                                                            <f:facet name="header">
                                                                Rejeitar Empréstimo
                                                            </f:facet>
                                                            <h:commandButton class="btn waves-effect red darken-3" value="X" action="#{gerenteEmprestimoBean.rejeitarEmprestimo(emprestimo)}" />
                                                        </h:column>
                                                    </h:dataTable>
                                                </h:form>
                                            </div>
                                        </div>                    
                                    </div>
                                </div>
                            </div>
                        </main>
                    </div>
                </div>
            </div>
        </div>    
    </h:body>
    <script type="text/javascript">
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();

                document.querySelector(this.getAttribute('href')).scrollIntoView({
                    behavior: 'smooth'
                });
            });
        });
    </script>
</html>
